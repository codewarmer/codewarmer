(function(a,b){if("function"===typeof define&&define.amd)define(["angular","ckeditor"],function(a){return b(a)});else return b(a)})(angular||null,function(a){var b=a.module("ngCkeditor",[]),g,d=!1;b.run(["$q","$timeout",function(b,m){function e(){"loaded"==CKEDITOR.status?(d=!0,g.resolve()):e()}g=b.defer();if(a.isUndefined(CKEDITOR))throw Error("CKEDITOR not found");CKEDITOR.disableAutoInline=!0;CKEDITOR.on("loaded",e);m(e,100)}]);b.directive("ckeditor",["$timeout","$q",function(b,m){return{restrict:"AC",
require:"ngModel",scope:!1,link:function(e,h,s,f){var q="textarea"==h[0].tagName.toLowerCase(),n=[],p=!1;q||h.attr("contenteditable",!0);var r=function(){var l={toolbar:"full",toolbar_full:[{name:"basicstyles",items:["Bold","Italic","Strike","Underline"]},{name:"paragraph",items:["BulletedList","NumberedList","Blockquote"]},{name:"editing",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["SpellChecker","Maximize"]},
"/",{name:"styles",items:"Format FontSize TextColor PasteText PasteFromWord RemoveFormat".split(" ")},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"forms",items:["Outdent","Indent"]},{name:"clipboard",items:["Undo","Redo"]},{name:"document",items:["PageBreak","Source"]}],disableNativeSpellChecker:!1,uiColor:"#FAFAFA",height:"400px",width:"100%"},l=a.extend(l,e[s.ckeditor]),c=q?CKEDITOR.replace(h[0],l):CKEDITOR.inline(h[0],l),g=m.defer();h.bind("$destroy",function(){c.destroy(!1)});
var k=function(){var a=c.getData();"<p></p>"==a&&(a=null);b(function(){f.$setViewValue(a)},0)},d=function(){if(n.length){var a=n.pop()||"<p></p>";p=!1;c.setData(a,function(){k();p=!0})}};c.on("pasteState",k);c.on("change",k);c.on("blur",k);c.on("key",k);c.on("instanceReady",function(){e.$apply(function(){d()})});c.on("customConfigLoaded",function(){g.resolve()});f.$render=function(){void 0===f.$viewValue&&(f.$setViewValue(null),f.$viewValue=null);n.push(f.$viewValue);p&&d()}};"loaded"==CKEDITOR.status&&
(d=!0);d?r():g.promise.then(r)}}}]);return b});
